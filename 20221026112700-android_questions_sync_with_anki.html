<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-11-15 Tue 09:03 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Android Questions Sync with Anki</title>
<meta name="generator" content="Org Mode" />
<link rel="stylesheet" href="static/x.css" type="text/css"/><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div id="content" class="content">
<h1 class="title">Android Questions Sync with Anki</h1>
<div id="table-of-contents" role="doc-toc">
<h2>Table of Contents</h2>
<div id="text-table-of-contents" role="doc-toc">
<ul>
<li><a href="#orgd0593a9">1. How to restart an activity?</a></li>
<li><a href="#org51c4a8c">2. How to remove underline in <code>AppCompatEditText</code>?</a></li>
<li><a href="#org33894b2">3. How to set ellipsis for <code>EditText</code>?</a></li>
<li><a href="#orga5bea1a">4. How to switch edit states of <code>EditText</code>?</a></li>
<li><a href="#org56999fa">5. Activity 启动模式有哪些？</a></li>
<li><a href="#org91590f2">6. Activity 各启动模式有何差异？</a></li>
<li><a href="#org3decebb">7. <code>Activity</code> 生命周期？</a></li>
<li><a href="#org4083c57">8. <code>View</code> 事件分发机制</a></li>
<li><a href="#org2ebf485">9. <code>ViewGroup</code> 事件分发机制</a></li>
</ul>
</div>
</div>
<ol class="org-ol">
<li><a href="android_interview.md#org3620053">questions</a></li>
<li><a href="https://juejin.cn/post/6844903797270003719">https://juejin.cn/post/6844903797270003719</a></li>
<li><a href="https://github.com/yangkun19921001/Blog/blob/master/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/Android%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87/Android/Android%20%E5%9F%BA%E7%A1%80/Activity.md">https://github.com/yangkun19921001/Blog/blob/master/%E7%AC%94%E8%AF%95%E9%9D%A2%E8%AF%95/Android%E9%AB%98%E7%BA%A7%E5%B7%A5%E7%A8%8B%E5%B8%88%E9%9D%A2%E8%AF%95%E5%BF%85%E5%A4%87/Android/Android%20%E5%9F%BA%E7%A1%80/Activity.md</a></li>
<li><a href="https://blog.csdn.net/qsdsn/article/details/81134143?utm_medium=distribute.pc_relevant.none-task-blog-OPENSEARCH-13.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-OPENSEARCH-13.control#2service%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">https://blog.csdn.net/qsdsn/article/details/81134143?utm_medium=distribute.pc_relevant.none-task-blog-OPENSEARCH-13.control&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-OPENSEARCH-13.control#2service%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F</a></li>
</ol>

<div id="outline-container-orgd0593a9" class="outline-2">
<h2 id="orgd0593a9"><span class="section-number-2">1.</span> How to restart an activity?</h2>
<div class="outline-text-2" id="text-1">
<div class="org-src-container">
<pre class="src src-kotlin">// something wrong with cached view model
// recreate()

finish()
startActivity(intent)
</pre>
</div>
</div>
</div>
<div id="outline-container-org51c4a8c" class="outline-2">
<h2 id="org51c4a8c"><span class="section-number-2">2.</span> How to remove underline in <code>AppCompatEditText</code>?</h2>
<div class="outline-text-2" id="text-2">
<div class="org-src-container">
<pre class="src src-kotlin">backgroundColorResource = R.color.transparent
</pre>
</div>
</div>
</div>
<div id="outline-container-org33894b2" class="outline-2">
<h2 id="org33894b2"><span class="section-number-2">3.</span> How to set ellipsis for <code>EditText</code>?</h2>
<div class="outline-text-2" id="text-3">
<div class="org-src-container">
<pre class="src src-kotlin">ellipsize = TextUtils.TruncateAt.END
</pre>
</div>
</div>
</div>
<div id="outline-container-orga5bea1a" class="outline-2">
<h2 id="orga5bea1a"><span class="section-number-2">4.</span> How to switch edit states of <code>EditText</code>?</h2>
<div class="outline-text-2" id="text-4">
<div class="org-src-container">
<pre class="src src-kotlin">// non-editable
keyListener = null

// editable
keyListener = TextKeyListener.getInstance(false, TextKeyListener.Capitalize.NONE)
</pre>
</div>
</div>
</div>
<div id="outline-container-org56999fa" class="outline-2">
<h2 id="org56999fa"><span class="section-number-2">5.</span> Activity 启动模式有哪些？</h2>
<div class="outline-text-2" id="text-5">
<p>
Standard, SingleTop, SingleTask, SingleInstance
</p>
</div>
</div>
<div id="outline-container-org91590f2" class="outline-2">
<h2 id="org91590f2"><span class="section-number-2">6.</span> Activity 各启动模式有何差异？</h2>
<div class="outline-text-2" id="text-6">
<ul class="org-ul">
<li><code>standard</code>: 默认，启动一个就多一个 <code>Activity</code> 实例</li>
<li><code>SingleTop</code>: 栈顶复用，如果处于栈顶，则生命周期不走 <code>onCreate</code> 和 <code>onStart</code></li>
<li><code>SingleTask</code>: 栈内复用，如果存在于栈内，则在其上的 <code>Activity</code> 全部出栈，使其位于栈顶，生命周期和 <code>SingleTop</code> 一样，基本用于 app 首页</li>
<li><code>SingleInstance</code>: <code>SingleTask</code> 加强版，系统会为要启动的 <code>Activity</code> 单独开一个栈，这个栈里只有它，适用于新开 <code>Activity</code> 要和 app 能独立开的。</li>
</ul>
</div>
</div>
<div id="outline-container-org3decebb" class="outline-2">
<h2 id="org3decebb"><span class="section-number-2">7.</span> <code>Activity</code> 生命周期？</h2>
<div class="outline-text-2" id="text-7">
<p>
<code>onCreate()</code> -&gt; <code>onStart()</code> -&gt; <code>onResume()</code> -&gt; <code>onPause()</code> -&gt; <code>onStop()</code> -&gt; <code>onDestroy()</code>
</p>
</div>
</div>
<div id="outline-container-org4083c57" class="outline-2">
<h2 id="org4083c57"><span class="section-number-2">8.</span> <code>View</code> 事件分发机制</h2>
<div class="outline-text-2" id="text-8">
<p>
如果在 <code>onTouch</code> 的 <code>ACTION_DOWN</code> 中返回 <code>false</code>, 之后的 touch 事件将不会被触发，不影响 click 事件。
</p>
<div class="org-src-container">
<pre class="src src-java"><span style="font-weight: bold;">public</span> <span style="font-weight: bold; text-decoration: underline;">boolean</span> <span style="font-weight: bold;">dispatchTouchEvent</span>(<span style="font-weight: bold; text-decoration: underline;">MotionEvent</span> <span style="font-weight: bold; font-style: italic;">event</span>) {
  <span style="font-weight: bold;">if</span> (mOnTouchListener != <span style="font-weight: bold; text-decoration: underline;">null</span> &amp;&amp; (mViewFlags &amp; ENABLED_MASK) == ENABLED &amp;&amp;
      mOnTouchListener.onTouch(<span style="font-weight: bold;">this</span>, event)) {
    <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">true</span>
  }
  <span style="font-weight: bold;">return</span> onTouchEvent(event)
}

<span style="font-weight: bold;">public</span> <span style="font-weight: bold; text-decoration: underline;">boolean</span> <span style="font-weight: bold;">onTouchEvent</span>(<span style="font-weight: bold; text-decoration: underline;">MotionEvent</span> <span style="font-weight: bold; font-style: italic;">event</span>) {
  <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">...</span>
  <span style="font-weight: bold;">if</span> ((viewFlags &amp; CLICKABLE) == CLICKABLE ||
      (viewFlags &amp; LONG_CLICKABLE) == LONG_CLICKABLE) {
    <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">...</span>
    <span style="font-weight: bold;">case</span> <span style="font-weight: bold; text-decoration: underline;">MotionEvent</span>.ACTION_UP:
      <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">...</span>
      performClick()
      <span style="font-weight: bold; font-style: italic;">// </span><span style="font-weight: bold; font-style: italic;">...</span>
    <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">true</span>
  }
  <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">false</span>
}

<span style="font-weight: bold;">public</span> <span style="font-weight: bold; text-decoration: underline;">boolean</span> <span style="font-weight: bold;">performClick</span>() {
  <span style="font-weight: bold;">if</span> (mOnClickListener != <span style="font-weight: bold; text-decoration: underline;">null</span>) {
    mOnClickListener.onClick(<span style="font-weight: bold;">this</span>)
    <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">true</span>
  }
  <span style="font-weight: bold;">return</span> <span style="font-weight: bold; text-decoration: underline;">false</span>
}
</pre>
</div>
</div>
</div>
<div id="outline-container-org2ebf485" class="outline-2">
<h2 id="org2ebf485"><span class="section-number-2">9.</span> <code>ViewGroup</code> 事件分发机制</h2>
<div class="outline-text-2" id="text-9">
<ol class="org-ol">
<li>事件首先传递到 <code>ViewGroup</code> 的 <code>dispatchTouchEvent</code></li>
<li><code>ViewGroup</code> 的 <code>dispatchTouchEvent</code> 中根据 <code>onInterceptTouchEvent</code> 判断事件是否需要被拦截，默认不拦截</li>
<li>如果被拦截，事件将不会传递给子 <code>View</code></li>
<li>如果不拦截，事件传递给子 <code>View</code>, 之后与 <code>View</code> 事件传递一样</li>
</ol>
</div>
</div>
</div>
<div id="postamble" class="status">
<div class="links"><a href="#content">T</a><a href="index.html">H</a><a id="share-img">I</a><a href="20210629191000-000_index.html">0</a></div><script src="static/dom2img.min.js" type="text/javascript"></script><script src="static/x.js" type="text/javascript"></script>
</div>
</body>
</html>
